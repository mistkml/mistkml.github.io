<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Deployment &mdash; MISTK  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MISTK Gaming API" href="api.html" />
    <link rel="prev" title="Testing" href="testing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MISTK
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide.html">Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">MISTK API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../gaming.html">Gaming</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide.html">Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#containerization">Containerization</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api.html">MISTK Gaming API</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MISTK</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../gaming.html">Gaming</a></li>
      <li class="breadcrumb-item active">Deployment</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/gaming/deployment.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="deployment">
<h1>Deployment<a class="headerlink" href="#deployment" title="Permalink to this heading"></a></h1>
<section id="containerization">
<h2>Containerization<a class="headerlink" href="#containerization" title="Permalink to this heading"></a></h2>
<p>All processes (including agents and orchestrators) in the MISTK ecosystem run as Docker containers
and require a <strong>Dockerfile</strong> to configure the runtime image.  The <strong>Dockerfiles</strong>
below runs the Test Agent example.
It includes the essentials for running within MISTK that can be used for any agent,
however agents are free to add any customizations to their runtime image:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>FROM python:3.8
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>RUN mkdir -p /usr/src/agents/test-agent
<span class="linenos"> 4</span>COPY requirements.txt /usr/src/agents/test-agent
<span class="linenos"> 5</span>RUN pip3 install --no-cache-dir -r /usr/src/agents/test-agent/requirements.txt -I --trusted-host files.pythonhosted.org --trusted-host pypi.org --trusted-host pypi.python.org
<span class="linenos"> 6</span>
<span class="linenos"> 7</span># Add the built MISTK wheel file
<span class="linenos"> 8</span>ADD mistk*.whl /tmp/
<span class="linenos"> 9</span>
<span class="linenos">10</span># Install it via pip
<span class="linenos">11</span>RUN pip install /tmp/mistk*.whl --trusted-host pypi.python.org --trusted-host pypi.org --trusted-host files.pythonhosted.org
<span class="linenos">12</span>
<span class="linenos">13</span>COPY . /usr/src/agents/test-agent
<span class="linenos">14</span>RUN cd /usr/src/agents/test-agent &amp;&amp; python setup.py easy_install -Z .
<span class="linenos">15</span>
<span class="linenos">16</span>EXPOSE 8081
<span class="linenos">17</span>ENTRYPOINT [&quot;python3&quot;]
<span class="linenos">18</span>CMD [&quot;-m&quot;, &quot;mistk.agent&quot;, &quot;test_agent.agent&quot;, &quot;TestAgent&quot;]
</pre></div>
</div>
<p>The final CMD line starts the agent and sets up its endpoints.  The third
argument (<cite>test_agent.agent</cite>) is the package/module of our agent
and the fourth argument (<cite>TestAgent</cite>) is the agent class name.</p>
<p>To update this Dockerfile for a new agent, a model developer would update the install path
on lines 13-14 and the model path and name on line 18. The MISTK whl
denoted on line 8 will need to be added to the folder where the Dockerfile is also.</p>
<p>The setup.py script referenced above is a standard python setup install script
which lists the python package dependencies for the agent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">##############################################################################</span>
<span class="linenos"> 2</span><span class="c1">#</span>
<span class="linenos"> 3</span><span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
<span class="linenos"> 4</span><span class="c1">#    it under the terms of the GNU General Public License as published by</span>
<span class="linenos"> 5</span><span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
<span class="linenos"> 6</span><span class="c1">#    (at your option) any later version.</span>
<span class="linenos"> 7</span><span class="c1">#</span>
<span class="linenos"> 8</span><span class="c1">#    This program is distributed in the hope that it will be useful,</span>
<span class="linenos"> 9</span><span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="linenos">10</span><span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="linenos">11</span><span class="c1">#    GNU General Public License for more details.</span>
<span class="linenos">12</span><span class="c1">#</span>
<span class="linenos">13</span><span class="c1">#    You should have received a copy of the GNU General Public License</span>
<span class="linenos">14</span><span class="c1">#    along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
<span class="linenos">15</span><span class="c1">#</span>
<span class="linenos">16</span><span class="c1">##############################################################################</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<span class="linenos">19</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="n">REQUIRES</span><span class="o">=</span><span class="p">[</span>
<span class="linenos">22</span>    <span class="s1">&#39;setuptools &gt;= 21.0.0&#39;</span><span class="p">,</span>
<span class="linenos">23</span>    <span class="s1">&#39;numpy &gt;= 1.13.3&#39;</span><span class="p">,</span>
<span class="linenos">24</span>    <span class="s1">&#39;Pillow == 7.0.0&#39;</span><span class="p">,</span>
<span class="linenos">25</span>    <span class="s1">&#39;mistk&#39;</span>
<span class="linenos">26</span><span class="p">]</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="n">setup</span><span class="p">(</span>
<span class="linenos">29</span>    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;test-model&#39;</span><span class="p">,</span>
<span class="linenos">30</span>    <span class="n">install_requires</span><span class="o">=</span><span class="n">REQUIRES</span><span class="p">,</span>
<span class="linenos">31</span>    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
<span class="linenos">32</span>    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span>
<span class="linenos">33</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="testing.html" class="btn btn-neutral float-left" title="Testing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="MISTK Gaming API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>